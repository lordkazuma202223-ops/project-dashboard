# Memory Log - 2026-02-07 - Burmese i18n Implementation

## Summary
Added Burmese language support to mingalbar-sg website with English/Burmese language switcher.

## Actions Taken

### i18n Setup
- Installed `next-intl` package
- Created `src/i18n/request.ts` for i18n configuration
- Created `src/middleware.ts` for locale detection
- Updated `next.config.ts` to support next-intl

### Translation Files
- Created `src/messages/en.json` - English translations for all pages
- Created `src/messages/my.json` - Burmese translations for all pages (Burmese script)
- Used Padauk font (already configured) for Burmese text rendering

### Structure Changes
- Reorganized app structure to support locales:
  * Created `src/app/[locale]/` directory
  * Moved all pages under `[locale]` directory
  * Updated root layout (`src/app/layout.tsx`)
  * Created locale-specific layout (`src/app/[locale]/layout.tsx`)

### Components Updated
- Created `LanguageSwitcher.tsx` - Dropdown language switch in top-right corner
- Updated `Navbar.tsx` to include language switcher and use translations
- Updated all pages to use `useTranslations` hook:
  * `src/app/[locale]/page.tsx` - Home page
  * `src/app/[locale]/about/page.tsx` - About page
  * `src/app/[locale]/community/page.tsx` - Community page
  * `src/app/[locale]/tools/page.tsx` - Tools page
  * `src/app/[locale]/guides/page.tsx` - Guides page
  * `src/app/[locale]/guides/[id]/page.tsx` - Individual guide page

### Build Status
- Build successful with Next.js 16.1.6
- All routes rendering correctly
- Middleware warning (deprecation) - not blocking

## Features
- Language switcher in navbar (top-right corner)
- Dropdown with EN (English) and မြန်မာ (Burmese) options
- URL-based routing (e.g., /en/about, /my/about)
- Default locale: English
- Automatic font switching for Burmese text (Padauk font)

## Technical Notes
- Used `next-intl` for i18n management
- Locale prefix 'as-needed' (no prefix for default locale)
- All translations stored in JSON files
- Server-side rendering with `getMessages()`
- Client components use `useTranslations` hook

## Deployment
- Successfully deployed to Vercel
- Production URL: https://mingalbar-sg.vercel.app
- Build time: ~36 seconds

## Issues Fixed with Swarm Agents
Applied all fixes identified by swarm agents:
1. Changed middleware matcher from `['/', '/(about|community|guides|tools)/:path*']` to `['/((?!api|_next|_vercel|.*\\..*).*)']` - now catches all routes including locale prefixes
2. Created `src/i18n/config.ts` with proper locale configuration
3. Renamed `src/middleware.ts` to `src/proxy.ts` for Next.js 16 convention
4. Removed i18n path from next.config.ts (now uses default)
5. Removed root `src/app/page.tsx` - middleware handles redirect with `localePrefix: 'always'`

## Critical Fix - 404 Root Issue
**Root cause:** `proxy.ts` was at `src/proxy.ts` instead of project root
**Solution:** Moved `proxy.ts` to project root (`mingalbar-sg/proxy.ts`) - Next.js 16 only recognizes middleware at project root
**Result:** Middleware now handles `/` → `/en` redirect automatically

## Deployments
- Final deployment: proxy.ts moved to project root, middleware now handles / -> /en redirect
- Build now correctly shows no root route (only `/_not-found` and `/[locale]/*` routes)

## Next Steps
- Test language switching functionality in production
- Consider adding more detailed Burmese translations
- Add Burmese content for tools and guides

---
